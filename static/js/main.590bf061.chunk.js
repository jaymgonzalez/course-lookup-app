(this["webpackJsonpps-flux"]=this["webpackJsonpps-flux"]||[]).push([[0],{32:function(e,t,a){e.exports=a(53)},53:function(e,t,a){"use strict";a.r(t);a(33);var n=a(0),r=a.n(n),c=a(12),o=a(3);var u=function(){return r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h1",null,"My course Admin Page"),r.a.createElement("p",null,"React, JavaScript, AWS and all the courses that I did in the past few years."),r.a.createElement(o.b,{to:"courses",className:"btn btn-primary"},"Courses"))},l=a(14),s=a(15),i=a(20),m=a(19),h=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"About"),r.a.createElement("p",null,"This app uses React."),r.a.createElement("p",null,"It was created to show the courses I have working on"),r.a.createElement("p",null,"For more info please visit: ",r.a.createElement("a",{href:"https://jaymgonzalez.com"},"my personal website")))}}]),a}(r.a.Component);var p=function(){var e={color:"orange"};return r.a.createElement("nav",null,r.a.createElement(o.c,{activeStyle:e,exact:!0,to:"/"},"Home")," | ",r.a.createElement(o.c,{activeStyle:e,to:"/courses"},"Courses")," | ",r.a.createElement(o.c,{activeStyle:e,to:"/about"},"About"))},f=a(8),E=a(28),d=new(a(29).Dispatcher),b="CREATE_COURSE",g="LOAD_COURSES",v="UPDATE_COURSE",y="DELETE_COURSE",C=[],O=new(function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"addChangeListener",value:function(e){this.on("change",e)}},{key:"removeChangeListener",value:function(e){this.removeListener("change",e)}},{key:"emitChange",value:function(){this.emit("change")}},{key:"getCourses",value:function(){return C}},{key:"getCourseBySlug",value:function(e){return C.find((function(t){return t.slug===e}))}},{key:"deleteCourse",value:function(e){}}]),a}(E.EventEmitter));d.register((function(e){switch(e.actionType){case b:C.push(e.course),O.emitChange();break;case g:C=e.courses,O.emitChange();break;case v:C=C.map((function(t){return t.id===e.course.id?e.course:t})),O.emitChange();break;case y:C=C.filter((function(t){return t.id!==parseInt(e.id,10)})),O.emitChange()}}));var j=O,k=a(10),S=a.n(k),w=a(16),N=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],r=t[1];Object(n.useEffect)((function(){c()}),[]);var c=function(){var e=Object(w.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://course-pluralsight-api.herokuapp.com/authors");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,r(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a};var I=function(e){var t=N();return r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Author"),r.a.createElement("th",null,"Category"),r.a.createElement("th",null,"\xa0"))),r.a.createElement("tbody",null,e.courses.map((function(a){return r.a.createElement("tr",{key:a.id},r.a.createElement("td",null,r.a.createElement(o.b,{to:"/course/"+a.slug},a.title)),r.a.createElement("td",null,t.map((function(e){return e.id===a.authorId&&e.name}))),r.a.createElement("td",null,a.category),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-outline-danger",onClick:function(){return e.deleteCourse(a.id)}},"Delete")))}))))},T=a(11);function x(e){return A.apply(this,arguments)}function A(){return(A=Object(w.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:if(400!==t.status){e.next=7;break}return e.next=5,t.text();case 5:throw a=e.sent,new Error(a);case 7:throw new Error("Network response was not ok.");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){throw console.error("API call failed. "+e),e}var P="https://course-pluralsight-api.herokuapp.com/courses/";function D(e){return function(e){return fetch(P+(e.id||""),{method:e.id?"PUT":"POST",headers:{"content-type":"application/json"},body:JSON.stringify(Object(T.a)(Object(T.a)({},e),{},{authorId:parseInt(e.authorId,10)}))}).then(x).catch(L)}(e).then((function(t){d.dispatch({actionType:e.id?v:b,course:t})}))}function F(){return fetch(P).then(x).catch(L).then((function(e){d.dispatch({actionType:g,courses:e})}))}function R(e){return(t=e,fetch(P+t,{method:"DELETE"}).then(x).catch(L)).then((function(){d.dispatch({actionType:y,id:e})}));var t}var U="https://course-pluralsight-api.herokuapp.com/authors/";function B(){return fetch(U).then(x).catch(L)}var J=function(){var e=Object(n.useState)(j.getCourses()),t=Object(f.a)(e,2),a=t[0],c=t[1],u=Object(n.useState)(B()),l=Object(f.a)(u,2),s=l[0],i=l[1];function m(){c(j.getCourses())}return Object(n.useEffect)((function(){return j.addChangeListener(m),0===j.getCourses().length&&F(),function(){return j.removeChangeListener(m)}}),[]),Object(n.useEffect)((function(){B().then((function(e){return i(e)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Courses"),r.a.createElement(o.b,{className:"btn btn-primary",to:"/course"},"Add Course"),r.a.createElement(I,{authors:s,courses:a,deleteCourse:R}))},_=a(9);var q=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Page Not Found"),r.a.createElement("p",null,r.a.createElement(o.b,{to:"/"},"Back to Home")))},z=a(17);function H(e){var t="form-group";return e.error.length>0&&(t+=" has-error"),r.a.createElement("div",{className:t},r.a.createElement("label",{htmlFor:e.id},e.label),r.a.createElement("div",{className:"field"},r.a.createElement("input",{id:e.id,name:e.name,onChange:e.onChange,value:e.value,className:"form-control"})),e.error&&r.a.createElement("div",{className:"alert alert-danger"},e.error))}H.defaultProps={error:""};var M=H;var W=function(e){var t=N();return"undefined"!==typeof e.course?r.a.createElement("form",{onSubmit:e.onSubmit},r.a.createElement(M,{id:"title",label:"Title",onChange:e.onChange,name:"title",value:e.course.title,error:e.errors.title}),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"author"},"Author"),r.a.createElement("div",{className:"field"},r.a.createElement("select",{id:"author",name:"authorId",onChange:e.onChange,value:e.course.authorId||"",className:"form-control"},r.a.createElement("option",{value:""}),t.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)})))),e.errors.authorId&&r.a.createElement("div",{className:"alert alert-danger"},e.errors.authorId)),r.a.createElement(M,{id:"category",label:"Category",name:"category",onChange:e.onChange,value:e.course.category,error:e.errors.category}),r.a.createElement("input",{type:"submit",value:"Save",className:"btn btn-primary"})):r.a.createElement(_.a,{to:"/404"})},G=a(18),K=function(e){var t=Object(n.useState)({}),a=Object(f.a)(t,2),c=a[0],o=a[1],u=Object(n.useState)(j.getCourses()),l=Object(f.a)(u,2),s=l[0],i=l[1],m=Object(n.useState)({id:null,slug:"",title:"",authorId:null,category:""}),h=Object(f.a)(m,2),p=h[0],E=h[1];function d(){i(j.getCourses())}return Object(n.useEffect)((function(){j.addChangeListener(d);var t=e.match.params.slug;return 0===s.length?F():t&&E(j.getCourseBySlug(t)),function(){return j.removeChangeListener(d)}}),[s.length,e.match.params.slug]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Mange Course"),r.a.createElement(W,{errors:c,course:p,onChange:function(e){var t=e.target;E(Object(T.a)(Object(T.a)({},p),{},Object(z.a)({},t.name,t.value)))},onSubmit:function(t){t.preventDefault(),function(){var e={};return p.title||(e.title="Title is required"),p.authorId||(e.authorId="Author is required"),p.category||(e.category="Category is required"),o(e),0===Object.keys(e).length}()&&D(p).then((function(){e.history.push("/courses"),G.b.success("Couse saved correctly.")}))}}))};a(52);var Q=function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement(G.a,{autoClose:3e3,hideProgressBar:!0}),r.a.createElement(p,null),r.a.createElement(_.d,null,r.a.createElement(_.b,{path:"/",exact:!0,component:u}),r.a.createElement(_.b,{path:"/courses",component:J}),r.a.createElement(_.b,{path:"/about",component:h}),r.a.createElement(_.b,{path:"/course/:slug",component:K}),r.a.createElement(_.b,{path:"/course",component:K}),r.a.createElement(_.b,{path:"/404",component:q}),r.a.createElement(_.a,{to:"/404"})))};Object(c.render)(r.a.createElement(o.a,null,r.a.createElement(Q,null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.590bf061.chunk.js.map